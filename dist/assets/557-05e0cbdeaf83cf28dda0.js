"use strict";(self.webpackChunktest_project_employee_employment=self.webpackChunktest_project_employee_employment||[]).push([[557],{557:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var a=s(4848),n=s(6540),l=s(913),r=s(362),i=s(1678);const o=e=>{const t=e%10,s=e%100;return s>=11&&s<=19?`${e} заданий`:0===e?"заданий нет":1===t?`${e} задание`:t>=2&&t<=4?`${e} задания`:`${e} заданий`};var c,d,m,h,p,u=s(7754);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},x.apply(null,arguments)}const g=function(e){return n.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-gift"},e),c||(c=n.createElement("polyline",{points:"20 12 20 22 4 22 4 12"})),d||(d=n.createElement("rect",{x:2,y:7,width:20,height:5})),m||(m=n.createElement("line",{x1:12,y1:22,x2:12,y2:7})),h||(h=n.createElement("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"})),p||(p=n.createElement("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})))},j=(0,n.memo)((({employee:e})=>{const t=(0,u.I)(e.avatar,'width="60"','height="60"'),{id:s}=e,n=(0,l.Zp)();console.log("employeesItem");const c=(e=>{const t=new Date,s=t.getFullYear(),a=new Date(e),n=new Date(a.getTime()-6e4*a.getTimezoneOffset());n.setFullYear(s),n<t&&n.setFullYear(s+1);const l=n.getTime()-t.getTime();return Math.floor(l/864e5)})(e.birthdate),d=(e=>{switch(e){case 0:case 365:return"сегодня";case 1:return"завтра";default:return e>=2&&e<=4?`через ${e} дня`:e>=5||0===e?`через ${e} дней`:`через ${e} день`}})(c);return(0,a.jsxs)("li",{className:"employee",children:[(0,a.jsx)("div",{className:"employee__avatar",children:(0,a.jsx)("img",{src:t,alt:"employee-avatar"})}),(0,a.jsxs)("div",{className:"employee__fio",onClick:()=>{n(`/employee/${s}`)},children:[(0,a.jsxs)("p",{children:[e.firstName," ",e.lastName]}),c<=7&&(0,a.jsx)(r.A,{title:`день рождение ${d} `,placement:"top",children:(0,a.jsx)("p",{children:(0,a.jsx)(g,{})})})]}),(0,a.jsx)("div",{className:"employee__status",children:(0,a.jsx)("div",{children:(0,a.jsx)(i.A,{currentStatus:e.status,id:s})})}),(0,a.jsx)("div",{className:"employee__tasks",children:(0,a.jsx)("p",{children:o(e.tasks.length)})})]})}));var v=s(8852);const y=e=>{var t;return null===(t=e.employees)||void 0===t?void 0:t.employees},f=()=>{const e=(0,v.GV)(y);return console.log("employeesList"),0===e.length?null:(0,a.jsx)("ul",{className:"employees-list",children:null==e?void 0:e.map((e=>(0,a.jsx)(j,{employee:e},e.id)))})};var N=s(845),w=s(9893);const k=()=>{const e=(0,v.jL)(),t=sessionStorage.getItem("filterParams"),[s,l]=(0,n.useState)(t||""),[r,i]=(0,n.useState)(!Boolean(t));return(0,a.jsxs)("div",{className:"search",children:[(0,a.jsx)("input",{className:"search__input",type:"text",placeholder:"Поиск сотрудников...",value:s,onChange:e=>l(e.target.value)}),(0,a.jsx)(w.$,{disabled:!Boolean(s),onClick:()=>{""!==s&&(i(!1),sessionStorage.setItem("filterParams",s),e((0,N.WF)(s)))},children:"Найти"}),(0,a.jsx)(w.$,{disabled:r,onClick:()=>{l(""),i(!0),sessionStorage.removeItem("filterParams"),e((0,N.WF)(""))},children:"Сбросить"})]})},_=()=>{console.log("employees");const e=(0,v.jL)();return(0,n.useEffect)((()=>{const t=sessionStorage.getItem("filterParams")||"";e((0,N.WF)(t))}),[]),(0,a.jsxs)("div",{className:"employees-container",children:[(0,a.jsx)(k,{}),(0,a.jsxs)("div",{className:"employees-table",children:[(0,a.jsxs)("div",{className:"employees-header",children:[(0,a.jsx)("p",{children:"Аватар"}),(0,a.jsx)("p",{children:"Фамилия Имя"}),(0,a.jsx)("p",{children:"Статус"}),(0,a.jsx)("p",{children:"Количество задач"})]}),(0,a.jsx)(f,{})]})]})}},1678:(e,t,s)=>{s.d(t,{A:()=>m});var a=s(4848),n=s(8303),l=s(6540),r=s(4957),i=s(8363),o=s(8852),c=s(845);const d={working:"На работе",dayOff:"Выходной",sick:"Болеет"},m=({currentStatus:e,id:t})=>{const s=(0,o.jL)(),[m,h]=(0,l.useState)(e);return(0,a.jsx)(n.A,{sx:{m:1},variant:"standard",children:(0,a.jsx)(r.A,{value:m,onChange:e=>{const a=e.target.value;h(a),s((0,c.Kv)({id:t,status:a}))},children:Object.keys(d).map((e=>(0,a.jsx)(i.A,{value:e,children:d[e]},e)))})})}},7754:(e,t,s)=>{s.d(t,{I:()=>a});const a=(e,t,s)=>{const a=e.indexOf(",")+1,n=e.slice(a),l=decodeURIComponent(n).replace(/width="undefined"/g,t).replace(/height="undefined"/g,s).replace(/x="NaN"/g,'x="50%"').replace(/y="NaN"/g,'y="50%"').replace(/undefinedxundefined/g,"Avatar");return`data:image/svg+xml;base64,${btoa(l)}`}}}]);